<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ë‚˜ì˜ ì¼ê¸°ì¥</title>
</head>
<body>
    <h1>ğŸ“˜ ë‚˜ì˜ ì¼ê¸°ì¥ </h1>

    <form id="diary-form">
        <input type="text" id="title" placeholder="ì œëª©" required />
        <br />
        <textarea id="content" placeholder="ë‚´ìš©" required></textarea>
        <br />
        <button type="submit">ì¼ê¸° ì €ì¥</button>
    </form>

    <h2>ğŸ“œ ì¼ê¸° ëª©ë¡</h2>
    <ul id="diary-list"></ul>

    <script>
        const form = document.getElementById("diary-form");
        const titleInput = document.getElementById("title");
        const contentInput = document.getElementById("content");
        const diaryList = document.getElementById("diary-list");

        // ì¼ê¸° ì €ì¥
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          const diary = {
            title: titleInput.value,
            content: contentInput.value
          };

          const res = await fetch("/diaries", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(diary)
          });

          if (res.ok) {
            titleInput.value = "";
            contentInput.value = "";
            loadDiaries();
          }
        });

        // ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadDiaries() {
          const res = await fetch("/diaries");
          const data = await res.json();
          diaryList.innerHTML = "";
          data.forEach((d) => {
          const li = document.createElement("li");
          li.innerText = `ğŸ“– ${d.title} - ${d.content}`;  // âœ… ì´ ì¤„ ìˆ˜ì •
          diaryList.appendChild(li);
        });
        }

        // ì²˜ìŒì— ì¼ê¸° ë¶ˆëŸ¬ì˜¤ê¸°
        loadDiaries();
    </script>
</body>
</html>