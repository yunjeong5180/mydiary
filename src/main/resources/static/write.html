<!DOCTYPE html>
<html lang="ko"> <!-- ë¬¸ì„œì˜ ì–¸ì–´ëŠ” í•œêµ­ì–´ -->
<head>
    <meta charset="UTF-8"> <!-- í•œê¸€ì´ ê¹¨ì§€ì§€ ì•Šë„ë¡ ë¬¸ì ì¸ì½”ë”© ì„¤ì • -->
    <title>âœï¸ ìƒˆ ì¼ê¸° ì‘ì„±</title> <!-- ë¸Œë¼ìš°ì € íƒ­ì— ë³´ì¼ ì œëª© -->

    <!-- ì™¸ë¶€ CSS íŒŒì¼ ì—°ê²° (ë””ìì¸ ìŠ¤íƒ€ì¼ ì ìš©ìš©) -->
    <link rel="stylesheet" href="/style.css">

    <!-- Google Fontsì—ì„œ í•œê¸€ í°íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
</head>

<body>

<!-- âœ… ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav class="nav-bar">
    <!-- ì™¼ìª½ì—ëŠ” ì œëª© -->
    <h1 class="nav-title">ğŸ“˜ ë‚˜ì˜ ì¼ê¸°ì¥</h1>

    <!-- ì˜¤ë¥¸ìª½ì—ëŠ” ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ë©”ë‰´ -->
    <div class="nav-menu">
        <a href="/index.html">ğŸ  í™ˆ</a>
        <a href="/list.html">ğŸ“‹ ëª©ë¡</a>
    </div>
</nav>

<!-- âœ… ì¼ê¸° ì‘ì„± í™”ë©´ ë³¸ë¬¸ -->
<main class="main-content">
    <h2>âœï¸ ìƒˆ ì¼ê¸° ì‘ì„±í•˜ê¸°</h2>

    <!-- âœï¸ ì‚¬ìš©ì ì…ë ¥ì„ ë°›ëŠ” í¼ -->
    <form id="diary-form">
        <!-- ì œëª© ì…ë ¥ì¹¸ -->
        <input type="text" id="title" placeholder="ì œëª©" required />

        <!-- ë‚´ìš© ì…ë ¥ì¹¸ -->
        <textarea id="content" placeholder="ë‚´ìš©" required></textarea>

        <!-- ì €ì¥ ë²„íŠ¼ -->
        <button type="submit">ì €ì¥</button>
    </form>
</main>

<!-- âœ… ì¼ê¸° ì €ì¥ì„ ì²˜ë¦¬í•˜ëŠ” JavaScript ì½”ë“œ -->
<script>
    // í¼, ì œëª©, ë‚´ìš© ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const form = document.getElementById("diary-form");
    const titleInput = document.getElementById("title");
    const contentInput = document.getElementById("content");

    // í¼ì´ ì œì¶œë˜ì—ˆì„ ë•Œ ì‹¤í–‰ë  ë™ì‘ ì •ì˜
    form.addEventListener("submit", async (e) => {
      e.preventDefault(); // ê¸°ë³¸ ë™ì‘(ìƒˆë¡œê³ ì¹¨) ë§‰ê¸°

      // ì‚¬ìš©ì ì…ë ¥ê°’ì„ ê°ì²´ë¡œ ë§Œë“¤ê¸°
      const diary = {
        title: titleInput.value,
        content: contentInput.value
      };

      // ì„œë²„ì— POST ìš”ì²­ìœ¼ë¡œ ì¼ê¸° ì €ì¥ ìš”ì²­ ë³´ë‚´ê¸°
      const res = await fetch("/diaries", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(diary)
      });

      // ì‘ë‹µì´ ì„±ê³µì´ë©´ ì…ë ¥ì°½ ë¹„ìš°ê³  ì•Œë¦¼ ë„ìš°ê¸°
      if (res.ok) {
        alert("ì¼ê¸°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
        titleInput.value = "";
        contentInput.value = "";
      }
    });
</script>

</body>
</html>
